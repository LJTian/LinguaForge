<!--leaderboard.wxml-->
<view class="page">
  <view class="header">
    <view class="header-title">ğŸ† æ’è¡Œæ¦œ</view>
    <view class="header-subtitle">çœ‹çœ‹ä½ åœ¨æ‰€æœ‰å­¦ä¹ è€…ä¸­çš„æ’å</view>
  </view>

  <view class="tabs">
    <view class="tab-item {{currentTab === 'score' ? 'active' : ''}}" bindtap="switchTab" data-tab="score">
      ç§¯åˆ†æ¦œ
    </view>
    <view class="tab-item {{currentTab === 'level' ? 'active' : ''}}" bindtap="switchTab" data-tab="level">
      ç­‰çº§æ¦œ
    </view>
  </view>

  <view class="leaderboard-list">
    <view class="rank-item" wx:for="{{rankings}}" wx:key="id">
      <view class="rank-number">
        <text wx:if="{{item.rank <= 3}}" class="medal">{{item.rank === 1 ? 'ğŸ¥‡' : item.rank === 2 ? 'ğŸ¥ˆ' : 'ğŸ¥‰'}}</text>
        <text wx:else class="rank-text">{{item.rank}}</text>
      </view>
      <view class="user-avatar">{{item.username.charAt(0).toUpperCase()}}</view>
      <view class="user-info">
        <view class="username">{{item.username}}</view>
        <view class="user-level">Lv.{{item.level}}</view>
      </view>
      <view class="score-info">
        <view class="score-value">{{currentTab === 'score' ? item.score : item.level}}</view>
        <view class="score-label">{{currentTab === 'score' ? 'ç§¯åˆ†' : 'ç­‰çº§'}}</view>
      </view>
    </view>
  </view>

  <view class="my-rank" wx:if="{{myRank}}">
    <view class="rank-card">
      <view class="rank-title">æˆ‘çš„æ’å</view>
      <view class="rank-content">
        <view class="my-rank-number">ç¬¬ {{myRank.rank}} å</view>
        <view class="my-score">{{currentTab === 'score' ? myRank.score + ' ç§¯åˆ†' : 'Lv.' + myRank.level}}</view>
      </view>
    </view>
  </view>

  <view class="empty" wx:if="{{rankings.length === 0 && !isLoading}}">
    <view class="empty-icon">ğŸ†</view>
    <view class="empty-text">æš‚æ— æ’è¡Œæ¦œæ•°æ®</view>
  </view>

  <view class="loading" wx:if="{{isLoading}}">åŠ è½½ä¸­...</view>
</view>
