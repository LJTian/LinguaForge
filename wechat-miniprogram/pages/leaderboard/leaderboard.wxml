<!--leaderboard.wxml-->
<view class="page">
  <view class="header">
    <view class="header-title">🏆 排行榜</view>
    <view class="header-subtitle">看看你在所有学习者中的排名</view>
  </view>

  <view class="tabs">
    <view class="tab-item {{currentTab === 'score' ? 'active' : ''}}" bindtap="switchTab" data-tab="score">
      积分榜
    </view>
    <view class="tab-item {{currentTab === 'level' ? 'active' : ''}}" bindtap="switchTab" data-tab="level">
      等级榜
    </view>
  </view>

  <view class="leaderboard-list">
    <view class="rank-item" wx:for="{{rankings}}" wx:key="id">
      <view class="rank-number">
        <text wx:if="{{item.rank <= 3}}" class="medal">{{item.rank === 1 ? '🥇' : item.rank === 2 ? '🥈' : '🥉'}}</text>
        <text wx:else class="rank-text">{{item.rank}}</text>
      </view>
      <view class="user-avatar">{{item.username.charAt(0).toUpperCase()}}</view>
      <view class="user-info">
        <view class="username">{{item.username}}</view>
        <view class="user-level">Lv.{{item.level}}</view>
      </view>
      <view class="score-info">
        <view class="score-value">{{currentTab === 'score' ? item.score : item.level}}</view>
        <view class="score-label">{{currentTab === 'score' ? '积分' : '等级'}}</view>
      </view>
    </view>
  </view>

  <view class="my-rank" wx:if="{{myRank}}">
    <view class="rank-card">
      <view class="rank-title">我的排名</view>
      <view class="rank-content">
        <view class="my-rank-number">第 {{myRank.rank}} 名</view>
        <view class="my-score">{{currentTab === 'score' ? myRank.score + ' 积分' : 'Lv.' + myRank.level}}</view>
      </view>
    </view>
  </view>

  <view class="empty" wx:if="{{rankings.length === 0 && !isLoading}}">
    <view class="empty-icon">🏆</view>
    <view class="empty-text">暂无排行榜数据</view>
  </view>

  <view class="loading" wx:if="{{isLoading}}">加载中...</view>
</view>
